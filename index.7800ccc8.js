var _=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function a(e){e.forEach(t)}function i(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e,t,n,a){if(e){const i=s(e,t,n,a);return e[0](i)}}function s(e,t,n,a){return e[1]&&a?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](a(t))):n.ctx}function o(e,t,n,a,i,r,l){const o=function(e,t,n,a){if(e[2]&&a){const i=e[2](a(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let a=0;a<n;a+=1)e[a]=t.dirty[a]|i[a];return e}return t.dirty|i}return t.dirty}(t,a,i,r);if(o){const i=s(t,n,a,l);e.p(i,o)}}function c(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function f(e){e.parentNode.removeChild(e)}function d(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function m(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function p(e){return document.createTextNode(e)}function g(){return p(" ")}function v(e,t,n,a){return e.addEventListener(t,n,a),()=>e.removeEventListener(t,n,a)}function x(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function z(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function $(e,t){e.value=null==t?"":t}function _(e,t,n,a){e.style.setProperty(t,n,a?"important":"")}function w(e,t){for(let n=0;n<e.options.length;n+=1){const a=e.options[n];if(a.__value===t)return void(a.selected=!0)}}function b(e,t,n){e.classList[n?"add":"remove"](t)}let k;function E(e){k=e}function T(){if(!k)throw new Error("Function called outside component initialization");return k}function M(e){T().$$.on_mount.push(e)}const S=[],y=[],R=[],V=[],F=Promise.resolve();let C=!1;function j(e){R.push(e)}function A(e){V.push(e)}let D=!1;const B=new Set;function L(){if(!D){D=!0;do{for(let e=0;e<S.length;e+=1){const t=S[e];E(t),P(t.$$)}for(E(null),S.length=0;y.length;)y.pop()();for(let e=0;e<R.length;e+=1){const t=R[e];B.has(t)||(B.add(t),t())}R.length=0}while(S.length);for(;V.length;)V.pop()();C=!1,D=!1,B.clear()}}function P(e){if(null!==e.fragment){e.update(),a(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(j)}}const O=new Set;let I;function U(){I={r:0,c:[],p:I}}function H(){I.r||a(I.c),I=I.p}function N(e,t){e&&e.i&&(O.delete(e),e.i(t))}function X(e,t,n,a){if(e&&e.o){if(O.has(e))return;O.add(e),I.c.push((()=>{O.delete(e),a&&(n&&e.d(1),a())})),e.o(t)}}function G(e,t,n){const a=e.$$.props[t];void 0!==a&&(e.$$.bound[a]=n,n(e.$$.ctx[a]))}function q(e){e&&e.c()}function Y(e,n,r,l){const{fragment:s,on_mount:o,on_destroy:c,after_update:u}=e.$$;s&&s.m(n,r),l||j((()=>{const n=o.map(t).filter(i);c?c.push(...n):a(n),e.$$.on_mount=[]})),u.forEach(j)}function W(e,t){const n=e.$$;null!==n.fragment&&(a(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function K(e,t){-1===e.$$.dirty[0]&&(S.push(e),C||(C=!0,F.then(L)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Z(t,i,r,l,s,o,c=[-1]){const u=k;E(t);const d=t.$$={fragment:null,ctx:null,props:o,update:e,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:i.context||[]),callbacks:n(),dirty:c,skip_bound:!1};let h=!1;if(d.ctx=r?r(t,i.props||{},((e,n,...a)=>{const i=a.length?a[0]:n;return d.ctx&&s(d.ctx[e],d.ctx[e]=i)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](i),h&&K(t,e)),n})):[],d.update(),h=!0,a(d.before_update),d.fragment=!!l&&l(d.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);d.fragment&&d.fragment.l(e),e.forEach(f)}else d.fragment&&d.fragment.c();i.intro&&N(t.$$.fragment),Y(t,i.target,i.anchor,i.customElement),L()}E(u)}class J{$destroy(){W(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class Q{constructor(e,t,n){this.vSharer=e,this.fSharer=t,this.program=n}useProgram(e){e.useProgram(this.program)}}function ee(e,t,n){const a=re(e,e.createShader(e.VERTEX_SHADER));e.shaderSource(a,t),e.compileShader(a),ie(e,a);const i=re(e,e.createShader(e.FRAGMENT_SHADER));e.shaderSource(i,n),e.compileShader(i),ie(e,i);const r=re(e,e.createProgram());return e.attachShader(r,a),e.attachShader(r,i),e.linkProgram(r),function(e,t){if(!e.getProgramParameter(t,e.LINK_STATUS))throw new Error("linkig failed: "+e.getProgramInfoLog(t))}(e,r),new Q(a,i,r)}function te(e,t){e.deleteProgram(t.program),e.deleteShader(t.vSharer),e.deleteShader(t.fSharer)}function ne(e,t,n){return function(e,t,n){const a=e.getAttribLocation(t,n);if(-1===a)throw new Error(`attribute '${n}' not found in program`);return a}(e,t.program,n)}function ae(e,t,n){return function(e,t,n){const a=e.getUniformLocation(t,n);if(null===a)throw new Error(`uniform '${n}' not found in program`);return a}(e,t.program,n)}function ie(e,t){const n=e.getShaderInfoLog(t);if(""!==n&&null!==n)throw new Error(n)}function re(e,t){if(null===t)throw new Error("gl error: "+e.getError());return t}function le(e,t){null===t?(e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,e.canvas.width,e.canvas.height)):(t.bind(e),e.viewport(0,0,t.width,t.height))}function se(e,t,n,a={}){const{beforeDraw:i=null}=a||{},r=ne(e,n,"aPosition");return e.enableVertexAttribArray(r),function(...a){t.bindToAttribute(e,r),n.useProgram(e),i&&i(...a),t.draw(e)}}class oe{constructor(e,t){this.fb=e,this.gfxTex=t}bind(e){e.bindFramebuffer(e.FRAMEBUFFER,this.fb)}get width(){return this.gfxTex.width}get height(){return this.gfxTex.height}}function ce(e,t){const n=re(e,e.createFramebuffer()),a=new oe(n,t);return a.bind(e),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.tex,0),function(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);switch(t){case e.FRAMEBUFFER_COMPLETE:return;case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:throw new Error("The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete.");case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:throw new Error("There is no attachment.");case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:throw new Error("Height and width of the attachment are not the same.");case e.FRAMEBUFFER_UNSUPPORTED:throw new Error("The format of the attachment is not supported or depth and stencil attachments are not the same renderbuffer.");default:throw new Error("unexpected frambuffer check result: "+t)}}(e),a}class ue{constructor(e,t,n,a){this.mode=e,this.buf=t,this.vertexSize=n,this.count=a}bind(e){e.bindBuffer(e.ARRAY_BUFFER,this.buf)}bindToAttribute(e,t){this.bind(e),e.vertexAttribPointer(t,this.vertexSize,e.FLOAT,!1,0,0)}draw(e){e.drawArrays(this.mode,0,this.count)}}function fe(e,t,n,a){t instanceof Array&&(t=new Float32Array(t));const i=re(e,e.createBuffer());return e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),new ue(a,i,n,t.length/n|0)}class de{constructor(e,t,n,a,i){this.tex=e,this.width=t,this.height=n,this.format=a,this.type=i}bind(e){e.bindTexture(e.TEXTURE_2D,this.tex)}}function he(e,t,n,a,i,r=null){const l=re(e,e.createTexture()),s=new de(l,t,n,a,i);return s.bind(e),e.texImage2D(e.TEXTURE_2D,0,a,t,n,0,a,i,r),s}var me="undefined"!=typeof Float32Array?Float32Array:Array;function pe(e,t,n){var a=t[0],i=t[1],r=t[2],l=t[3],s=t[4],o=t[5],c=t[6],u=t[7],f=t[8],d=n[0],h=n[1];return e[0]=a,e[1]=i,e[2]=r,e[3]=l,e[4]=s,e[5]=o,e[6]=d*a+h*l+c,e[7]=d*i+h*s+u,e[8]=d*r+h*o+f,e}function ge(e,t,n){var a=n[0],i=n[1];return e[0]=a*t[0],e[1]=a*t[1],e[2]=a*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});class ve{getFSParts(e){return{declaration:`uniform float uMaskSolid${e};`,usage:`uMaskSolid${e}`}}prepareFSUniforms(e,t,n){const a=ae(e,t,`uMaskSolid${n}`);return(t,n)=>{e.uniform1f(a,n)}}}class xe{constructor(e){this.angle=e}getFSParts(e){const t="uMaskGradient"+e;return{declaration:`uniform vec2 ${t};`,usage:`mix(${t}.x, ${t}.y, clamp(0.5 + dot(vTextureCoord-0.5, vec2(${Math.cos(this.angle).toFixed(5)},${Math.sin(-this.angle).toFixed(5)})), 0., 1.))`}}prepareFSUniforms(e,t,n){const a=ae(e,t,`uMaskGradient${n}`);return(t,n)=>{e.uniform2f(a,t,n)}}getAngleDeg(){return this.angle/Math.PI*180}}class ze{getFSParts(e){const t="uMaskCircle"+e;return{declaration:`uniform vec2 ${t};`,usage:`mix(${t}.x, ${t}.y, 1.-step(0.245, dot(vTextureCoord-0.5, vTextureCoord-0.5)))`}}prepareFSUniforms(e,t,n){const a=ae(e,t,`uMaskCircle${n}`);return(t,n)=>{e.uniform2f(a,t,n)}}}class $e{getFSParts(e){const t="uMaskSmoothCircle"+e;return{declaration:`uniform vec2 ${t};`,usage:`mix(${t}.x, ${t}.y, clamp(1.-length((vTextureCoord-0.5)*2.), 0., 1.))`}}prepareFSUniforms(e,t,n){const a=ae(e,t,`uMaskSmoothCircle${n}`);return(t,n)=>{e.uniform2f(a,t,n)}}}class _e{constructor(e,t,n){this.minVal=e,this.maxVal=t,this.mask=n}}const we="\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\nprecision highp sampler2D;\n#else\nprecision mediump float;\nprecision mediump sampler2D;\n#endif\n",be="\nprecision highp float;\n\nattribute vec2 aPosition;\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n\tvTextureCoord = aPosition;\n\tgl_Position = vec4((aPosition.xy-0.5)*2., 0, 1.);\n}",ke=`\n${we}\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec2 uScale;\n{{COEF_DECLARATIONS}}\n\nvoid main(void) {\n\t// vec4 c = texture2D(uSamplerCoefs, vTextureCoord);\n\tfloat diffusionRateA = {{diffusionRateA}};\n\tfloat diffusionRateB = {{diffusionRateB}};\n\tfloat feedRate = {{feedRate}};\n\tfloat killRate = {{killRate}};\n\tfloat timeDelta = {{timeDelta}};\n\n\tvec4 cur = texture2D(uSampler, vTextureCoord);\n\n\tvec2 laplacian = -cur.xy +\n\t\t0.2 * (\n\t\t\ttexture2D(uSampler, vTextureCoord + uScale*vec2(1, 0)).xy +\n\t\t\ttexture2D(uSampler, vTextureCoord + uScale*vec2(-1,0)).xy +\n\t\t\ttexture2D(uSampler, vTextureCoord + uScale*vec2(0, 1)).xy +\n\t\t\ttexture2D(uSampler, vTextureCoord + uScale*vec2(0,-1)).xy\n\t\t) + 0.05 * (\n\t\t\ttexture2D(uSampler, vTextureCoord + uScale*vec2(-1,-1)).xy +\n\t\t\ttexture2D(uSampler, vTextureCoord + uScale*vec2( 1,-1)).xy +\n\t\t\ttexture2D(uSampler, vTextureCoord + uScale*vec2( 1, 1)).xy +\n\t\t\ttexture2D(uSampler, vTextureCoord + uScale*vec2(-1, 1)).xy\n\t\t);\n\n\t/*\n\t// this should be faster theoretically but prctically compiler is smart enough and speed is same\n\tvec2 ab = cur.xy;\n\tfloat a = cur.x;\n\tfloat b = cur.y;\n\tfloat reactionValue = a * b * b;\n\tvec2 reaction = vec2(\n\t\t-reactionValue, //for a\n\t\treactionValue   //for b\n\t);\n\tvec2 ambient = vec2(\n\t\tfeedRate * (1. - a),       //for a\n\t\t-(killRate + feedRate) * b //for b\n\t);\n\tvec2 diffusionRate = vec2(diffusionRateA, diffusionRateB);\n\n\tvec2 newAB = ab + (diffusionRate * laplacian + reaction + ambient)*timeDelta;\n\tnewAB = clamp(newAB, 0., 1.);\n\tfloat change = (a-newAB.x) - (b-newAB.y);\n\n\tgl_FragColor = vec4(newAB, max(change, mix(change, cur.z, 0.99)), 1.);\n\t*/\n\n\tfloat a = cur.x;\n\tfloat b = cur.y;\n\tfloat reaction = a * b * b;\n\tfloat newA = a + (diffusionRateA * laplacian.x - reaction + feedRate * (1. - a)) * timeDelta;\n\tfloat newB = b + (diffusionRateB * laplacian.y + reaction - (killRate + feedRate) * b) * timeDelta;\n\tnewA = clamp(newA, 0., 1.);\n\tnewB = clamp(newB, 0., 1.);\n\tfloat change = (a-newA) - (b-newB);\n\tvec4 _col = vec4(newA, newB, max(change, mix(change, cur.z, 0.99)), 1.);\n\tgl_FragColor = _col; //precision is lost if assigned directly (mediump is used?)\n}`,Ee={whiteBlack:"\n\t\tfloat c = clamp((field.x - field.y*1.5)*4., 0., 1.);\n\t\tvec3 color = vec3(c, c, c);\n\t",rgb:"\n\t\tfloat change = (abs(field.z)*200.);\n\t\tchange = change/(0.25+change)*1.333;\n\t\tvec3 color = vec3(change, field.x*0.5, field.y*1.5);\n\t",hsv:"\n\t\tfloat c = clamp((field.x - field.y), 0., 0.70);\n\t\tfloat change = (abs(field.z)*300.);\n\t\tchange = change/(0.5+change)*1.5;\n\t\tvec3 color = hsv2rgb(vec3(c, 1.-change*0.25, (0.75+c*0.25+change*0.25)));\n\t",darkSide:"\n\t\tfloat c = clamp((field.x - field.y), 0., 0.70);\n\t\tfloat change = (abs(field.z)*300.);\n\t\tchange = change/(0.5+change)*1.5;\n\t\tvec3 color = hsv2rgb(vec3(c, 1.-change*0.25, (0.75+c*0.25)*(0.1+change*0.9)));\n\t",green:"\n\t\tfloat c = clamp((field.x - field.y*1.5)*4., 0., 1.);\n\t\tvec3 color = vec3(c, 1.-field.y, field.x);\n\t",blueGreen:"\n\t\t// float change = (abs(field.z)*100.);\n\t\t// change = change/(0.25+change)*1.333;\n\t\t// float c = clamp((field.x - field.y*1.5)*0.85+0.15, 0., 1.);\n\t\t// vec3 color = rgb2hsv(vec3(c, 0.5, 0.5-change*0.5));\n\n\t\tfloat c = clamp((field.x - field.y*1.5)*0.85+0.15, 0., 1.);\n\t\tvec3 color = rgb2hsv(vec3(c, 0.5, 0.5));\n\t",changes:"\n\t\tfloat c = 1.-clamp((field.x - field.y*1.5)*4., 0., 1.);\n\t\tfloat change = (abs(field.z)*300.);\n\t\tchange = change/(0.25+change)*1.333;\n\t\tvec3 changeCol = field.z < 0. ? vec3(1.,0.15,0.15) : vec3(0.25,0.75,0.25);\n\t\tvec3 color = mix(vec3(c, c, c)*0.2, changeCol, change);\n\t",electric:"\n\t\tfloat change = (abs(field.z)*300.);\n\t\tchange = change/(0.5+change)*1.5;\n\t\tfloat c = clamp((field.x - field.y*1.5), 0., 1.);\n\t\tvec3 color = hsv2rgb(vec3(fract(0.54+c*0.2+change*0.1), 1.-change*change*0.5, 0.4+change*0.6));\n\t"},Te=`\n${we}\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec2 uOffset;\nuniform vec2 uSize;\nuniform lowp int uFrameVisible;\n\n// https://stackoverflow.com/a/17897228\nvec3 rgb2hsv(vec3 c)\n{\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n\tvec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\nvec3 hsv2rgb(vec3 c)\n{\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvoid main(void) {\n\tvec2 pos = vTextureCoord*uSize + uOffset;\n\tvec4 field = texture2D(uSampler, pos);\n\n\tvec2 innerRect = step(0., pos) * step(-1., -pos);\n\tvec2 outerRect = step(-0.005, pos) * step(-1.005, -pos);\n\tfloat isIn = uFrameVisible > 0\n\t\t? (min(innerRect.x, innerRect.y)*0.8+0.2) + (1.-min(outerRect.x, outerRect.y))*0.4\n\t\t: 1.;\n\n\t{{COLOR_CONV}}\n\n\tgl_FragColor = vec4(mix(vec3(0.5), color, isIn), 1.);\n}`,Me=`\n${we}\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nvoid main(void) {\n\tgl_FragColor = texture2D(uSampler, vTextureCoord);\n}`,Se=`\n${we}\nuniform vec4 uColor;\n\nvoid main(void) {\n\tgl_FragColor = uColor;\n}`;function ye(e){const t=he(e,1,1,e.RGBA,e.FLOAT,null);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);const n=ce(e,t),a=ee(e,be,`\n\t${we}\n\tvoid main(void) {\n\t\tvec4 col = vec4(0.123456789, 0., 0., 1.);\n\t\tgl_FragColor = col; //precision is lost if assigned directly (mediump is used?)\n\t}`),i=fe(e,[0,0,2,0,0,2],2,e.TRIANGLES);le(e,n),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),se(e,i,a)();const r=new Float32Array(4);e.readPixels(0,0,1,1,e.RGBA,e.FLOAT,r),le(e,null),te(e,a),e.deleteFramebuffer(n.fb),e.deleteTexture(t.tex),e.deleteBuffer(i.buf);return Math.log2(Math.abs(r[0]-.123456789))<-20}class Re{constructor(e,t,n){this.gl=e,this.width=t,this.height=n,this.wrapMode="repeat",this.frameIsVisible=!0,this.iteration=null,this.result=null,[this.fieldTextureType,this.isHighpActuallySupported]=(()=>{const t=e.getExtension("OES_texture_float"),n=e.getExtension("WEBGL_color_buffer_float");if(t&&n)return[e.FLOAT,ye(e)];const a=e.getExtension("OES_texture_half_float"),i=e.getExtension("EXT_color_buffer_half_float");if(a&&i)return[a.HALF_FLOAT_OES,!1];throw new Error("девайс/браузер не поддерживает достаточную точность вычислений на видеокарте")})(),this.fieldTextureMinFilter=(()=>{const t=this.isFloatTexSupported()?"OES_texture_float_linear":"OES_texture_half_float_linear";return e.getExtension(t)?e.LINEAR:e.NEAREST})(),this.curFB=ce(e,this.makeFieldTexture(t,n)),this.nextFB=ce(e,this.makeFieldTexture(t,n)),this.clear();this.rect=fe(e,[0,0,0,1,1,1,1,1,1,0,0,0],2,e.TRIANGLES);const a=new ve;this.coefs={diffusionRateA:new _e(1,1,a),diffusionRateB:new _e(.5,.5,a),feedRate:new _e(.055,.055,a),killRate:new _e(.062,.062,a),timeDelta:new _e(1,1,a)},this.masks=[a,new xe(0),new xe(3*Math.PI/2),new xe(Math.PI/4),new xe(7*Math.PI/4),new ze,new $e],this.colorMode="green",this.updateIterationData(),this.updateResultData();const i=ee(e,be,Me);this.drawCopy=se(e,this.rect,i);const r=ee(e,"\nprecision highp float;\n\nattribute vec2 aPosition;\nuniform mat3 uTransform;\n\nvoid main(void) {\n\tgl_Position = vec4(((uTransform*vec3(aPosition, 1.)).xy-0.5)*2., 0, 1.);\n}",Se),l=ae(e,r,"uTransform"),s=ae(e,r,"uColor");this.drawLineInner=se(e,this.rect,r,{beforeDraw:(t,n,a,i,r)=>{const o=Math.sqrt((a-t)**2+(n-i)**2),c=Math.atan2(i-n,a-t),u=(f=new me(9),me!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f);var f;pe(u,u,[0,1]),ge(u,u,[1,-1]),pe(u,u,[t/this.width,n/this.height]),function(e,t,n){var a=t[0],i=t[1],r=t[2],l=t[3],s=t[4],o=t[5],c=t[6],u=t[7],f=t[8],d=Math.sin(n),h=Math.cos(n);e[0]=h*a+d*l,e[1]=h*i+d*s,e[2]=h*r+d*o,e[3]=h*l-d*a,e[4]=h*s-d*i,e[5]=h*o-d*r,e[6]=c,e[7]=u,e[8]=f}(u,u,c),ge(u,u,[o/this.width,3/this.height]),pe(u,u,[0,-.5]);const[d,h]=r||[0,1];e.uniform4f(s,d,h,0,0),e.uniformMatrix3fv(l,!1,u)}})}makeFieldTexture(e,t){const n=this.gl,a=he(n,e,t,n.RGBA,this.fieldTextureType,null);return n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.fieldTextureMinFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),a}iter(e){const t=this.gl;for(let n=0;n<e;n++)le(t,this.nextFB),t.activeTexture(t.TEXTURE0),this.curFB.gfxTex.bind(t),this.iteration&&this.iteration.draw(),[this.curFB,this.nextFB]=[this.nextFB,this.curFB]}draw(e){le(this.gl,null),this.curFB.gfxTex.bind(this.gl),this.result&&this.result.draw(e)}updateIterationData(){const e=this.gl;this.iteration&&te(e,this.iteration.prog);const t=Object.entries(this.coefs);let n=ke,a="";for(const[e,i]of t){const{declaration:t,usage:r}=i.mask.getFSParts("_"+e);a+=t+"\n",n=n.replace(`{{${e}}}`,r)}n=n.replace("{{COEF_DECLARATIONS}}",a);const i=ee(e,be,n),r=[];for(const[n,a]of t)r.push(a.mask.prepareFSUniforms(e,i,"_"+n));const l=ae(e,i,"uScale"),s=ae(e,i,"uSampler"),o=se(e,this.rect,i,{beforeDraw:()=>{e.uniform2f(l,1/this.width,1/this.height),e.uniform1i(s,0);for(let e=0;e<t.length;e++){const n=t[e][1];r[e](n.minVal,n.maxVal)}}});this.iteration={prog:i,draw:o}}updateResultData(){const e=this.gl;this.result&&te(e,this.result.prog);const t=Te.replace("{{COLOR_CONV}}",Ee[this.colorMode]),n=ee(e,be,t),a=ae(e,n,"uOffset"),i=ae(e,n,"uSize"),r=ae(e,n,"uFrameVisible"),l=se(e,this.rect,n,{beforeDraw:t=>{if(null===t)e.uniform2f(a,0,0),e.uniform2f(i,1,1),e.uniform1i(r,0);else{const{width:n,height:l}=e.canvas;e.uniform2f(a,-t.x/t.width,-t.y/t.height),e.uniform2f(i,n/t.width,l/t.height),e.uniform1i(r,this.frameIsVisible?1:0)}}});this.result={prog:n,draw:l}}updateTexWrapMode(){const e=this.gl,t="repeat"===this.wrapMode?e.REPEAT:e.MIRRORED_REPEAT;for(const n of[this.curFB,this.nextFB])n.gfxTex.bind(e),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t)}resizeFB(e,t,n){const a=this.gl;!function(e,t,n,a,i=null){t.bind(e);const{format:r,type:l}=t;e.texImage2D(e.TEXTURE_2D,0,r,n,a,0,r,l,i),t.width=n,t.height=a}(a,e.gfxTex,t,n),e.bind(a),a.clear(a.COLOR_BUFFER_BIT)}resize(e,t){const n=this.gl;this.resizeFB(this.nextFB,e,t),le(n,this.nextFB),this.curFB.gfxTex.bind(n),this.drawCopy(),this.resizeFB(this.curFB,e,t),le(n,this.curFB),this.nextFB.gfxTex.bind(n),this.drawCopy(),this.width=e,this.height=t}clear(){const e=this.gl;e.clearColor(1,0,0,0);for(const t of[this.curFB,this.nextFB])t.bind(e),e.clear(e.COLOR_BUFFER_BIT)}drawDot(e,t,n){this.drawLine(e-1.5,t,e+1.5,t,n)}drawLine(e,t,n,a,i){le(this.gl,this.curFB),this.drawLineInner(e,t,n,a),e>n&&([e,n]=[n,e],[t,a]=[a,t]),e===n&&(n+=.001);const r=(a-t)/(n-e);let l=e,s=t,o=Math.floor(e/this.width),c=Math.floor(t/this.height),u=0;for(;l<n;){const f=o*this.width,d=c*this.height;this.drawLineInner(e-f,t-d,n-f,a-d,i);const h=s+(f+this.width-l)*r;if(h<d?(l+=(s-d)/-r,s=d,c-=1):h>d+this.height?(l+=(d+this.height-s)/r,s=d+this.height,c+=1):(l=f+this.width,s=h,o+=1),u++>10){console.error("drawLine looped too much!");break}}}isFloatTexSupported(){return this.fieldTextureType===this.gl.FLOAT}isHighpSupported(){return this.isHighpActuallySupported}getMaxFieldSize(){return this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE)}getSize(){return[this.width,this.height]}getCoefs(){return this.coefs}getMasks(){return this.masks}getWrapMode(){return this.wrapMode}setWrapMode(e){this.wrapMode=e,this.updateTexWrapMode()}getColorMode(){return this.colorMode}setColorMode(e){this.colorMode=e,this.updateResultData()}isFrameVisible(){return this.frameIsVisible}toggleFrame(e){this.frameIsVisible=e}}function Ve(e){const{startElem:t,callbacks:n}=e,a=e.moveElem??window,i=e.offsetElem??t,r=e.leaveElem??t,{singleDown:l=Fe,singleMove:s=Fe,singleUp:o=Fe}=n,{singleHover:c=Fe,singleLeave:u=Fe,wheelRot:f=Fe}=n;let d=null;const h=Ce(i),m=h((function(e,t,n){return 0==e.button&&(Be(E),Be(T),Le(S),l(e,"mouse",e.clientX+t,e.clientY+n))})),p=h((function(e,t,n){return s(e,"mouse",e.clientX+t,e.clientY+n)})),g=h((function(e,t,n){return 0==e.button&&(Le(E),Le(T),Be(S),o(e,"mouse"))})),v=h((function(e,t,n){return c(e,e.clientX+t,e.clientY+n)})),x=h((function(e,t,n){return u(e,e.clientX+t,e.clientY+n)})),z=h((function(e,t,n){if(null!==d)return!1;Be(V),Be(F),Be(C);const a=e.changedTouches[0];return d=a.identifier,l(e,d,a.clientX+t,a.clientY+n)})),$=h((function(e,t,n){if(null!==d){const a=function(e,t){const n=De(e,t);if(null===n)throw new Error(`touch #${t} not found`);return n}(e.changedTouches,d);return s(e,d,a.clientX+t,a.clientY+n)}})),_=h((function(e,t,n){if(null===d)return!1;const a=De(e.changedTouches,d);return null!==a&&(d=null,Le(V),Le(F),Le(C),o(e,a.identifier))})),w=h((function(e,t,n){_(e)})),b=je(h,f),k=[t,"mousedown",m],E=[a,"mousemove",p],T=[a,"mouseup",g],M=[t,"wheel",b],S=[t,"mousemove",v],y=[r,"mouseleave",x],R=[t,"touchstart",z],V=[a,"touchmove",$],F=[a,"touchend",_],C=[a,"touchcancel",w];return Ae([k,E,T,S,y,M,R,V,F,C],[k,R,S,y,M])}function Fe(){}function Ce(e){return function(t){return n=>{let a=0,i=0;"no-offset"!==e&&({left:a,top:i}=e.getBoundingClientRect()),t(n,-a,-i)&&n.preventDefault()}}}function je(e,t){const n=[];return n[WheelEvent.DOM_DELTA_PIXEL]=1,n[WheelEvent.DOM_DELTA_LINE]=20,n[WheelEvent.DOM_DELTA_PAGE]=50,e((function(e,a,i){const r=n[e.deltaMode];return t(e,e.deltaX*r,e.deltaY*r,e.deltaZ*r,e.clientX+a,e.clientY+i)}))}function Ae(e,t){let n=!1;function a(a){n!==(a=a??!n)&&(a?t.map(Be):e.map(Le),n=a)}return a(!0),{toggle:a,get isOn(){return n},on(){a(!0)},off(){a(!1)}}}function De(e,t){for(let n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return null}function Be(e){e[0].addEventListener(e[1],e[2],{capture:!0,passive:!1})}function Le(e){e[0].removeEventListener(e[1],e[2],{capture:!0})}function Pe(e){let t,n;const a=e[2].default,i=l(a,e,e[1],null);return{c(){t=h("div"),i&&i.c(),x(t,"class","fake-portal svelte-w6x3o8")},m(a,r){u(a,t,r),i&&i.m(t,null),e[3](t),n=!0},p(e,[t]){i&&i.p&&2&t&&o(i,a,e,e[1],t,null,null)},i(e){n||(N(i,e),n=!0)},o(e){X(i,e),n=!1},d(n){n&&f(t),i&&i.d(n),e[3](null)}}}function Oe(e,t,n){let{$$slots:a={},$$scope:i}=t,{fakeElem:r=null}=t;return M((()=>{const e=r.children[0],t=e.parentElement;return document.body.appendChild(e),()=>t.appendChild(e)})),e.$$set=e=>{"fakeElem"in e&&n(0,r=e.fakeElem),"$$scope"in e&&n(1,i=e.$$scope)},[r,i,a,function(e){y[e?"unshift":"push"]((()=>{r=e,n(0,r)}))}]}class Ie extends J{constructor(e){super(),Z(this,e,Oe,Pe,r,{fakeElem:0})}}function Ue(e){let t,n;const a=e[5].default,i=l(a,e,e[8],null);return{c(){t=h("div"),i&&i.c(),x(t,"class","tip-wrap svelte-rjc0lp"),_(t,"left",e[2]+"px"),_(t,"top",e[3]+"px")},m(a,r){u(a,t,r),i&&i.m(t,null),e[6](t),n=!0},p(e,r){i&&i.p&&256&r&&o(i,a,e,e[8],r,null,null),(!n||4&r)&&_(t,"left",e[2]+"px"),(!n||8&r)&&_(t,"top",e[3]+"px")},i(e){n||(N(i,e),n=!0)},o(e){X(i,e),n=!1},d(n){n&&f(t),i&&i.d(n),e[6](null)}}}function He(e){let t,n,a;function i(t){e[7](t)}let r={$$slots:{default:[Ue]},$$scope:{ctx:e}};return void 0!==e[0]&&(r.fakeElem=e[0]),t=new Ie({props:r}),y.push((()=>G(t,"fakeElem",i))),{c(){q(t.$$.fragment)},m(e,n){Y(t,e,n),a=!0},p(e,[a]){const i={};270&a&&(i.$$scope={dirty:a,ctx:e}),!n&&1&a&&(n=!0,i.fakeElem=e[0],A((()=>n=!1))),t.$set(i)},i(e){a||(N(t.$$.fragment,e),a=!0)},o(e){X(t.$$.fragment,e),a=!1},d(e){W(t,e)}}}function Ne(e,t,n){let a,i,{$$slots:r={},$$scope:l}=t,s=0,o=0,{origin:c}=t;return M((()=>{const e=i.getBoundingClientRect();if(c)n(2,({left:s,top:o}=c),s,n(3,o)),n(2,s-=e.width/2),n(3,o+=-e.height-12);else{const t=a.parentElement;if(t){const a=t.getBoundingClientRect();n(2,s=a.left),n(3,o=a.top-e.height-12)}}})),e.$$set=e=>{"origin"in e&&n(4,c=e.origin),"$$scope"in e&&n(8,l=e.$$scope)},[a,i,s,o,c,r,function(e){y[e?"unshift":"push"]((()=>{i=e,n(1,i)}))},function(e){a=e,n(0,a)},l]}class Xe extends J{constructor(e){super(),Z(this,e,Ne,He,r,{origin:4})}}function Ge(e){let t,n;return t=new Xe({props:{$$slots:{default:[qe]},$$scope:{ctx:e}}}),{c(){q(t.$$.fragment)},m(e,a){Y(t,e,a),n=!0},i(e){n||(N(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){W(t,e)}}}function qe(e){let t,n,a,i,r,l,s;return{c(){t=p("Можно плавно изменять значение, если"),n=h("br"),a=p("\n\t\t\tпотянуть "),i=h("b"),i.textContent="стрелочку",r=p(" или покрутить "),l=h("b"),l.textContent="колёсико",s=p(" мыши.")},m(e,o){u(e,t,o),u(e,n,o),u(e,a,o),u(e,i,o),u(e,r,o),u(e,l,o),u(e,s,o)},d(e){e&&f(t),e&&f(n),e&&f(a),e&&f(i),e&&f(r),e&&f(l),e&&f(s)}}}function Ye(e){let t,n,i,r,l,s,o,d,m=e[4]&&We<10&&Ge(e);return{c(){t=h("div"),n=h("input"),i=g(),r=h("div"),r.textContent="⭥",l=g(),m&&m.c(),n.value=e[0],x(n,"class","svelte-1qez1xa"),x(r,"class","slider svelte-1qez1xa"),x(t,"class","number-input-ext svelte-1qez1xa"),b(t,"grabbing",e[1])},m(a,f){u(a,t,f),c(t,n),c(t,i),c(t,r),e[8](r),c(t,l),m&&m.m(t,null),e[9](t),s=!0,o||(d=[v(n,"change",e[5]),v(t,"mouseover",e[10]),v(t,"mouseout",e[11])],o=!0)},p(e,[a]){(!s||1&a&&n.value!==e[0])&&(n.value=e[0]),e[4]&&We<10?m?16&a&&N(m,1):(m=Ge(e),m.c(),N(m,1),m.m(t,null)):m&&(U(),X(m,1,1,(()=>{m=null})),H()),2&a&&b(t,"grabbing",e[1])},i(e){s||(N(m),s=!0)},o(e){X(m),s=!1},d(n){n&&f(t),e[8](null),m&&m.d(),e[9](null),o=!1,a(d)}}}let We=0;function Ke(e,t,n){let a,i,{value:r}=t,{onChange:l}=t,{slideStep:s=1}=t,o=!1,c=!1;M((()=>{let e=0,t=0;const a=Ve({startElem:i,callbacks:{singleDown:(a,i,l,s)=>(n(1,c=!0),e=r,t=s,!0),singleMove:(a,i,o,c)=>(n(0,r=e-(c-t)*s),We++,l&&l(r),!0),singleUp:(e,t)=>(n(1,c=!1),!0)}});return()=>a.off()})),M((()=>{const e=function(e){const{startElem:t,wheelRot:n}=e;return Ae([],[[t,"wheel",je(Ce(e.offsetElem??t),n)]])}({startElem:a,offsetElem:"no-offset",wheelRot:(e,t,a,i,o,c)=>(n(0,r-=.02*a*s),We++,l&&l(r),!0)});return()=>e.off()}));return e.$$set=e=>{"value"in e&&n(0,r=e.value),"onChange"in e&&n(6,l=e.onChange),"slideStep"in e&&n(7,s=e.slideStep)},e.$$.update=()=>{2&e.$$.dirty&&document.body.classList.toggle("grabbing",c)},[r,c,a,i,o,function(e){const t=+e.currentTarget.value;isNaN(t)?e.currentTarget.setCustomValidity("не число"):(n(0,r=t),l&&l(t),e.currentTarget.setCustomValidity(""))},l,s,function(e){y[e?"unshift":"push"]((()=>{i=e,n(3,i)}))},function(e){y[e?"unshift":"push"]((()=>{a=e,n(2,a)}))},()=>n(4,o=!0),()=>n(4,o=!1)]}class Ze extends J{constructor(e){super(),Z(this,e,Ke,Ye,r,{value:0,onChange:6,slideStep:7})}}function Je(e,t,n){const a=e.slice();return a[14]=t[n],a[16]=n,a}function Qe(e){let t,n,a=e[6](e[14])+"";return{c(){t=h("option"),n=p(a),t.__value=e[16],t.value=t.__value},m(e,a){u(e,t,a),c(t,n)},p(e,t){4&t&&a!==(a=e[6](e[14])+"")&&z(n,a)},d(e){e&&f(t)}}}function et(e){let t,n,a,i,r,l;return t=new Ze({props:{value:e[0].minVal,onChange:e[8],slideStep:e[3]}}),{c(){q(t.$$.fragment),n=g(),a=h("button"),a.innerHTML='<div class="svelte-1e0rgh0">⇄</div>',x(a,"class","swap-button svelte-1e0rgh0")},m(s,o){Y(t,s,o),u(s,n,o),u(s,a,o),i=!0,r||(l=v(a,"click",e[7]),r=!0)},p(e,n){const a={};1&n&&(a.value=e[0].minVal),8&n&&(a.slideStep=e[3]),t.$set(a)},i(e){i||(N(t.$$.fragment,e),i=!0)},o(e){X(t.$$.fragment,e),i=!1},d(e){W(t,e),e&&f(n),e&&f(a),r=!1,l()}}}function tt(e){let t,n,a,i,r,l,s,o,m,$,b,k,E,T,M,S=e[5](e[0].mask),y=e[2],R=[];for(let t=0;t<y.length;t+=1)R[t]=Qe(Je(e,y,t));let V=S&&et(e);return k=new Ze({props:{value:e[0].maxVal,onChange:e[9],slideStep:e[3]}}),{c(){t=h("div"),n=h("b"),a=p(e[1]),i=g(),r=h("div"),l=h("select");for(let e=0;e<R.length;e+=1)R[e].c();o=g(),m=h("br"),$=g(),V&&V.c(),b=g(),q(k.$$.fragment),_(r,"float","right"),x(r,"class","svelte-1e0rgh0"),x(t,"class","wrap svelte-1e0rgh0"),_(t,"padding-top",e[4])},m(s,f){u(s,t,f),c(t,n),c(n,a),c(t,i),c(t,r),c(r,l);for(let e=0;e<R.length;e+=1)R[e].m(l,null);w(l,e[2].findIndex(e[12])),c(t,o),c(t,m),c(t,$),V&&V.m(t,null),c(t,b),Y(k,t,null),E=!0,T||(M=v(l,"change",e[10]),T=!0)},p(e,[n]){if((!E||2&n)&&z(a,e[1]),68&n){let t;for(y=e[2],t=0;t<y.length;t+=1){const a=Je(e,y,t);R[t]?R[t].p(a,n):(R[t]=Qe(a),R[t].c(),R[t].m(l,null))}for(;t<R.length;t+=1)R[t].d(1);R.length=y.length}(!E||5&n&&s!==(s=e[2].findIndex(e[12])))&&w(l,e[2].findIndex(e[12])),1&n&&(S=e[5](e[0].mask)),S?V?(V.p(e,n),1&n&&N(V,1)):(V=et(e),V.c(),N(V,1),V.m(t,b)):V&&(U(),X(V,1,1,(()=>{V=null})),H());const i={};1&n&&(i.value=e[0].maxVal),8&n&&(i.slideStep=e[3]),k.$set(i),(!E||16&n)&&_(t,"padding-top",e[4])},i(e){E||(N(V),N(k.$$.fragment,e),E=!0)},o(e){X(V),X(k.$$.fragment,e),E=!1},d(e){e&&f(t),d(R,e),V&&V.d(),W(k),T=!1,M()}}}function nt(e,t,n){let{label:a}=t,{coef:i}=t,{masks:r}=t,{onMaskChange:l}=t,{slideStep:s}=t,{paddingTop:o=""}=t;const c={0:"🡒",45:"🡖",90:"🡓",270:"🡑",315:"🡕"};function u(e){return!(e instanceof ve)}return e.$$set=e=>{"label"in e&&n(1,a=e.label),"coef"in e&&n(0,i=e.coef),"masks"in e&&n(2,r=e.masks),"onMaskChange"in e&&n(11,l=e.onMaskChange),"slideStep"in e&&n(3,s=e.slideStep),"paddingTop"in e&&n(4,o=e.paddingTop)},[i,a,r,s,o,u,function(e){if(e instanceof ve)return"сплошная ■";if(e instanceof xe){const t=Math.round(e.getAngleDeg());return`градиент ${c[t]||t.toFixed(0)+"°"}`}return e instanceof ze?"круг ⬤︎":e instanceof $e?"пятно ☀":"???"},function(){n(0,[i.minVal,i.maxVal]=[i.maxVal,i.minVal],i)},function(e){n(0,i.minVal=e,i)},function(e){n(0,i.maxVal=e,i),i.mask instanceof ve&&n(0,i.minVal=e,i)},function(e){const t=i.mask;n(0,i.mask=r[e.currentTarget.value],i),!u(t)&&u(i.mask)&&i.minVal===i.maxVal&&n(0,i.minVal=3*i.maxVal/4,i),l()},l,e=>e===i.mask]}class at extends J{constructor(e){super(),Z(this,e,nt,tt,r,{label:1,coef:0,masks:2,onMaskChange:11,slideStep:3,paddingTop:4})}}const it=e=>({}),rt=e=>({}),lt=e=>({}),st=e=>({});function ot(e,t,n){const a=e.slice();return a[72]=t[n][0],a[73]=t[n][1],a}function ct(t){let n,a,i;return{c(){n=h("button"),n.textContent=">>",x(n,"class","link-like show-cfg svelte-zj50zr")},m(e,r){u(e,n,r),a||(i=v(n,"click",t[40]),a=!0)},p:e,d(e){e&&f(n),a=!1,i()}}}function ut(t){let n,a,i;return{c(){n=h("button"),n.textContent="<< скрыть (esc)",x(n,"class","link-like svelte-zj50zr")},m(e,r){u(e,n,r),a||(i=v(n,"click",t[39]),a=!0)},p:e,d(e){e&&f(n),a=!1,i()}}}function ft(e){let t,n;return{c(){t=m("path"),n=m("path"),x(t,"d","M0 0h24v24H0V0z"),x(t,"fill","none"),x(t,"class","svelte-zj50zr"),x(n,"d","M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"),x(n,"class","svelte-zj50zr")},m(e,a){u(e,t,a),u(e,n,a)},d(e){e&&f(t),e&&f(n)}}}function dt(e){let t,n;return{c(){t=m("path"),n=m("path"),x(t,"d","M0 0h24v24H0V0z"),x(t,"fill","none"),x(t,"class","svelte-zj50zr"),x(n,"d","M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"),x(n,"class","svelte-zj50zr")},m(e,a){u(e,t,a),u(e,n,a)},d(e){e&&f(t),e&&f(n)}}}function ht(e){let t,n,a,i,r,l=e[72]+"";function s(){return e[41](e[73])}return{c(){t=h("button"),n=p(l),a=h("br"),x(t,"class","link-like svelte-zj50zr"),x(a,"class","svelte-zj50zr")},m(e,l){u(e,t,l),c(t,n),u(e,a,l),i||(r=v(t,"click",s),i=!0)},p(t,n){e=t},d(e){e&&f(t),e&&f(a),i=!1,r()}}}function mt(e){let t;return{c(){t=h("div"),t.textContent="девайс/браузер не поддерживает высокую точность вычислений на видеокарте, симуляция будет\n\t\t\t\t\tнеточной",x(t,"class","warn small wrap-words svelte-zj50zr")},m(e,n){u(e,t,n)},d(e){e&&f(t)}}}function pt(e){let t;return{c(){t=h("span"),t.textContent="↔",x(t,"class","dir-icon svelte-zj50zr")},m(e,n){u(e,t,n)},d(e){e&&f(t)}}}function gt(e){let t,n,a,i,r,l,s;return{c(){t=h("div"),n=h("span"),n.textContent="↕",a=h("input"),i=g(),r=p(e[11]),x(n,"class","dir-icon svelte-zj50zr"),x(a,"type","range"),x(a,"min","5"),x(a,"max",e[14]),a.value=e[16],x(a,"class","svelte-zj50zr"),x(t,"class","svelte-zj50zr")},m(o,f){u(o,t,f),c(t,n),c(t,a),c(t,i),c(t,r),l||(s=v(a,"input",e[25]),l=!0)},p(e,t){16384&t[0]&&x(a,"max",e[14]),65536&t[0]&&(a.value=e[16]),2048&t[0]&&z(r,e[11])},d(e){e&&f(t),l=!1,s()}}}function vt(e){let t,n,r,s,w,k,E,T,M,S,R,V,F,C,j,D,B,L,P,O,I,U,H,K,Z,J,Q,ee,te,ne,ae,ie,re,le,se,oe,ce,ue,fe,de,he,me,pe,ge,ve,xe,ze,$e,_e,we,be,ke,Ee,Te,Me,Se,ye,Re,Ve,Fe,Ce,je,Ae,De,Be,Le,Pe,Oe,Ie,Ue,He,Ne,Xe,Ge,qe,Ye,We,Ke,Ze,Je,Qe,et,tt,nt,vt,xt,zt,$t,_t,wt,bt,kt,Et,Tt,Mt,St,yt,Rt,Vt,Ft,Ct,jt,At,Dt,Bt,Lt,Pt,Ot,It,Ut,Ht,Nt,Xt,Gt,qt,Yt,Wt,Kt,Zt,Jt,Qt,en,tn,nn,an,rn,ln,sn,on,cn,un,fn,dn,hn,mn,pn,gn,vn,xn,zn,$n,_n,wn,bn,kn,En,Tn,Mn,Sn,yn,Rn,Vn,Fn,Cn,jn,An,Dn,Bn,Ln,Pn,On,In,Un,Hn,Nn,Xn,Gn,qn,Yn,Wn,Kn,Zn,Jn,Qn,ea,ta,na,aa,ia,ra,la,sa,oa,ca,ua,fa,da=!e[6].isHighpSupported(),ha=e[5].hint+"";function ma(e,t){return e[4]?ut:ct}let pa=ma(e),ga=pa(e);function va(e,t){return e[13]?dt:ft}let xa=va(e),za=xa(e),$a=Object.entries(e[34]),_a=[];for(let t=0;t<$a.length;t+=1)_a[t]=ht(ot(e,$a,t));const wa=e[38].fps,ba=l(wa,e,e[37],st),ka=e[38].ips,Ea=l(ka,e,e[37],rt);let Ta=da&&mt();function Ma(t){e[55](t)}let Sa={label:"a diffusion rate",onMaskChange:e[26],masks:e[6].getMasks(),slideStep:.001,paddingTop:"4px"};function ya(t){e[56](t)}void 0!==e[17]&&(Sa.coef=e[17]),$t=new at({props:Sa}),y.push((()=>G($t,"coef",Ma)));let Ra={label:"b diffusion rate",onMaskChange:e[26],masks:e[6].getMasks(),slideStep:.001,paddingTop:"7px"};function Va(t){e[57](t)}void 0!==e[18]&&(Ra.coef=e[18]),bt=new at({props:Ra}),y.push((()=>G(bt,"coef",ya)));let Fa={label:"feed rate",onMaskChange:e[26],masks:e[6].getMasks(),slideStep:1e-4,paddingTop:"7px"};function Ca(t){e[58](t)}void 0!==e[20]&&(Fa.coef=e[20]),Tt=new at({props:Fa}),y.push((()=>G(Tt,"coef",Va)));let ja={label:"kill rate",onMaskChange:e[26],masks:e[6].getMasks(),slideStep:1e-4,paddingTop:"7px"};function Aa(t){e[59](t)}void 0!==e[19]&&(ja.coef=e[19]),yt=new at({props:ja}),y.push((()=>G(yt,"coef",Ca)));let Da={label:"speed",onMaskChange:e[26],masks:e[6].getMasks(),slideStep:.01,paddingTop:"7px"};void 0!==e[21]&&(Da.coef=e[21]),Ft=new at({props:Da}),y.push((()=>G(Ft,"coef",Aa)));let Ba=!e[9]&&pt(),La=!e[9]&&gt(e);return{c(){t=h("div"),n=h("div"),ga.c(),r=g(),s=h("button"),s.textContent="скриншот",w=g(),k=h("button"),E=m("svg"),za.c(),T=g(),M=h("div"),S=h("div"),S.innerHTML='<h1 class="svelte-zj50zr">Reaction–Diffusion</h1> \n\t\t\t<p style="opacity:0.8" class="svelte-zj50zr">Симуляция двух (a и b)<br class="svelte-zj50zr"/>\n\t\t\t\tреагирующих друг с другом<br class="svelte-zj50zr"/>\n\t\t\t\tи рассеивающихся веществ.<br class="svelte-zj50zr"/> \n\t\t\t\t<a href="https://www.karlsims.com/rd.html" class="svelte-zj50zr">Подробнее</a>.</p>',R=g(),V=h("fieldset"),F=h("legend"),F.textContent="Пресеты",C=g(),j=h("button"),j.textContent="случайно",D=h("br"),B=g();for(let e=0;e<_a.length;e+=1)_a[e].c();L=g(),P=h("fieldset"),O=h("legend"),O.textContent="Статус",I=g(),U=h("div"),ba&&ba.c(),H=p(" FPS, "),Ea&&Ea.c(),K=p(" итераций/с"),Z=g(),Ta&&Ta.c(),J=g(),Q=h("fieldset"),ee=h("legend"),ee.textContent="Цвет",te=g(),ne=h("label"),ae=h("input"),ie=p("ч/б"),re=g(),le=h("label"),se=h("input"),oe=p("RGB"),ce=g(),ue=h("label"),fe=h("input"),de=p("HSV"),he=g(),me=h("label"),pe=h("input"),ge=p("зелёный"),ve=h("br"),xe=g(),ze=h("label"),$e=h("input"),_e=p("сине-зелёный"),we=g(),be=h("label"),ke=h("input"),Ee=p("изменения"),Te=h("br"),Me=g(),Se=h("label"),ye=h("input"),Re=p("электро"),Ve=g(),Fe=h("label"),Ce=h("input"),je=p("Тёмная сторона"),Ae=g(),De=h("fieldset"),Be=h("legend"),Be.textContent="Рисование",Le=g(),Pe=h("button"),Pe.textContent="♻️",Oe=p(" \n\t\t\t"),Ie=h("button"),Ie.textContent="|",Ue=g(),He=h("button"),He.textContent="||",Ne=g(),Xe=h("button"),Xe.textContent="|||",Ge=p(" \n\t\t\t"),qe=h("button"),qe.textContent="•",Ye=g(),We=h("button"),We.innerHTML='<div style="margin:0 -2px 0 -2px; transform:translateY(-2px)" class="svelte-zj50zr">𐬽</div>',Ke=g(),Ze=h("button"),Ze.innerHTML='<div style="margin:0 -3px 0 -2px" class="svelte-zj50zr">𐬽</div> \n\t\t\t\t<div style="position:absolute;top:-3px;transform:translateX(-3px)" class="svelte-zj50zr">𐬼</div>',Je=g(),Qe=h("div"),Qe.textContent="а ещё — мышкой/пальцем",et=g(),tt=h("fieldset"),nt=h("legend"),nt.textContent="Симуляция",vt=g(),xt=h("div"),xt.textContent="маска",zt=g(),q($t.$$.fragment),wt=g(),q(bt.$$.fragment),Et=g(),q(Tt.$$.fragment),St=g(),q(yt.$$.fragment),Vt=g(),q(Ft.$$.fragment),jt=g(),At=h("fieldset"),Dt=h("legend"),Dt.textContent="Размер",Bt=g(),Lt=h("div"),Ba&&Ba.c(),Pt=h("input"),Ot=g(),It=p(e[10]),Ut=g(),Ht=h("label"),Nt=h("input"),Xt=p("квадрат"),Gt=g(),La&&La.c(),qt=g(),Yt=h("fieldset"),Wt=h("legend"),Wt.textContent="Итераций за кадр",Kt=g(),Zt=h("span"),Zt.textContent="плавнее",Jt=g(),Qt=h("input"),en=g(),tn=p(e[1]),nn=g(),an=h("span"),an.textContent="быстрее",rn=g(),ln=h("fieldset"),sn=h("legend"),sn.textContent="Внешняя область",on=g(),cn=h("div"),un=h("div"),fn=h("label"),dn=h("input"),hn=p("повторять"),mn=h("br"),pn=g(),gn=h("label"),vn=h("input"),xn=p("отразить"),zn=g(),$n=h("div"),$n.innerHTML='влияет на<br class="svelte-zj50zr"/>симуляцию',_n=g(),wn=h("div"),bn=h("label"),kn=h("input"),En=p("отображать"),Tn=h("br"),Mn=g(),Sn=h("label"),yn=h("input"),Rn=p("затемнять"),Vn=h("br"),Fn=g(),Cn=h("label"),jn=h("input"),An=p("скрыть"),Dn=g(),Bn=h("span"),Bn.textContent="быстрее",Ln=g(),Pn=h("div"),On=p("размер: "),In=h("input"),Un=g(),Hn=p(e[2]),Nn=g(),Xn=h("fieldset"),Gn=h("legend"),Gn.textContent="Запись",qn=g(),Yn=h("input"),Wn=g(),Kn=h("label"),Zn=h("input"),Jn=p("вкл"),Qn=h("br"),ea=g(),ta=h("code"),na=p(ha),aa=g(),ia=h("p"),ia.innerHTML='Вдохновлено <a href="https://www.instagram.com/p/CGRCGcVHh4_/" class="svelte-zj50zr">постом в Инстаграме</a>',ra=g(),la=h("p"),la.innerHTML='Исходники:<br class="svelte-zj50zr"/> \n\t\t\t<a href="https://github.com/3bl3gamer/reaction-diffusion" class="svelte-zj50zr">github.com/3bl3gamer/reaction-diffusion</a>',sa=g(),oa=h("p"),oa.innerHTML='Ещё у меня есть<br class="svelte-zj50zr"/> \n\t\t\t<a href="https://3bl3gamer.github.io/fractal-chaos/" class="svelte-zj50zr">Генератор фракталов методом Хаоса</a><br class="svelte-zj50zr"/>\n\t\t\tи\n\t\t\t<a href="https://3bl3gamer.github.io/buddhabrot/" class="svelte-zj50zr">Генератор Буддабротов</a>',x(s,"class","link-like svelte-zj50zr"),x(E,"xmlns","http://www.w3.org/2000/svg"),x(E,"width","24px"),x(E,"height","24px"),x(E,"viewBox","0 0 24 24"),x(E,"fill","#000000"),x(E,"class","svelte-zj50zr"),x(k,"class","fullscreen svelte-zj50zr"),x(n,"class","cfg-head svelte-zj50zr"),x(S,"class","info-block svelte-zj50zr"),x(F,"class","svelte-zj50zr"),x(j,"class","link-like random svelte-zj50zr"),x(D,"class","svelte-zj50zr"),x(V,"class","cfg-presets svelte-zj50zr"),x(O,"class","svelte-zj50zr"),x(U,"class","svelte-zj50zr"),x(P,"class","svelte-zj50zr"),x(ee,"class","svelte-zj50zr"),x(ae,"type","radio"),ae.__value="whiteBlack",ae.value=ae.__value,x(ae,"class","svelte-zj50zr"),e[43][0].push(ae),x(ne,"class","svelte-zj50zr"),x(se,"type","radio"),se.__value="rgb",se.value=se.__value,x(se,"class","svelte-zj50zr"),e[43][0].push(se),x(le,"class","svelte-zj50zr"),x(fe,"type","radio"),fe.__value="hsv",fe.value=fe.__value,x(fe,"class","svelte-zj50zr"),e[43][0].push(fe),x(ue,"class","svelte-zj50zr"),x(pe,"type","radio"),pe.__value="green",pe.value=pe.__value,x(pe,"class","svelte-zj50zr"),e[43][0].push(pe),x(me,"class","svelte-zj50zr"),x(ve,"class","svelte-zj50zr"),x($e,"type","radio"),$e.__value="blueGreen",$e.value=$e.__value,x($e,"class","svelte-zj50zr"),e[43][0].push($e),x(ze,"class","svelte-zj50zr"),x(ke,"type","radio"),ke.__value="changes",ke.value=ke.__value,x(ke,"class","svelte-zj50zr"),e[43][0].push(ke),x(be,"class","svelte-zj50zr"),x(Te,"class","svelte-zj50zr"),x(ye,"type","radio"),ye.__value="electric",ye.value=ye.__value,x(ye,"class","svelte-zj50zr"),e[43][0].push(ye),x(Se,"class","svelte-zj50zr"),x(Ce,"type","radio"),Ce.__value="darkSide",Ce.value=Ce.__value,x(Ce,"class","svelte-zj50zr"),e[43][0].push(Ce),x(Fe,"class","svelte-zj50zr"),x(Q,"class","svelte-zj50zr"),x(Be,"class","svelte-zj50zr"),x(Pe,"class","svelte-zj50zr"),x(Ie,"class","svelte-zj50zr"),x(He,"class","svelte-zj50zr"),x(Xe,"class","svelte-zj50zr"),x(qe,"class","svelte-zj50zr"),x(We,"class","svelte-zj50zr"),_(Ze,"position","relative"),x(Ze,"class","svelte-zj50zr"),x(Qe,"class","dim small svelte-zj50zr"),_(Qe,"text-align","center"),x(De,"class","draw-cfg svelte-zj50zr"),x(nt,"class","svelte-zj50zr"),x(xt,"class","mask-label small svelte-zj50zr"),x(tt,"class","sim-cfg svelte-zj50zr"),x(Dt,"class","svelte-zj50zr"),x(Pt,"type","range"),x(Pt,"min","5"),x(Pt,"max",e[14]),Pt.value=e[15],x(Pt,"class","svelte-zj50zr"),x(Nt,"type","checkbox"),x(Nt,"class","svelte-zj50zr"),x(Ht,"class","svelte-zj50zr"),x(Lt,"class","svelte-zj50zr"),x(At,"class","size-cfg svelte-zj50zr"),x(Wt,"class","svelte-zj50zr"),x(Zt,"class","dim svelte-zj50zr"),x(Qt,"type","range"),x(Qt,"class","iters-input svelte-zj50zr"),x(Qt,"min","1"),x(Qt,"max","16"),Qt.value=e[22],x(an,"class","dim svelte-zj50zr"),x(Yt,"class","svelte-zj50zr"),x(sn,"class","svelte-zj50zr"),x(dn,"type","radio"),dn.__value="repeat",dn.value=dn.__value,x(dn,"class","svelte-zj50zr"),e[43][1].push(dn),x(fn,"class","svelte-zj50zr"),x(mn,"class","svelte-zj50zr"),x(vn,"type","radio"),vn.__value="mirror",vn.value=vn.__value,x(vn,"class","svelte-zj50zr"),e[43][1].push(vn),x(gn,"class","svelte-zj50zr"),x($n,"class","small dim svelte-zj50zr"),x(un,"class","column svelte-zj50zr"),x(kn,"type","radio"),kn.__value="visible",kn.value=kn.__value,x(kn,"class","svelte-zj50zr"),e[43][2].push(kn),x(bn,"class","svelte-zj50zr"),x(Tn,"class","svelte-zj50zr"),x(yn,"type","radio"),yn.__value="darken",yn.value=yn.__value,x(yn,"class","svelte-zj50zr"),e[43][2].push(yn),x(Sn,"class","svelte-zj50zr"),x(Vn,"class","svelte-zj50zr"),x(jn,"type","radio"),jn.__value="hidden",jn.value=jn.__value,x(jn,"class","svelte-zj50zr"),e[43][2].push(jn),x(Cn,"class","svelte-zj50zr"),x(Bn,"class","small dim svelte-zj50zr"),x(wn,"class","column svelte-zj50zr"),x(cn,"class","switches svelte-zj50zr"),x(In,"type","range"),x(In,"min","0"),x(In,"max","3"),x(In,"step","0.1"),x(In,"class","svelte-zj50zr"),x(Pn,"class","svelte-zj50zr"),x(ln,"class","frame-cfg svelte-zj50zr"),x(Gn,"class","svelte-zj50zr"),x(Yn,"class","svelte-zj50zr"),x(Zn,"type","checkbox"),x(Zn,"class","svelte-zj50zr"),x(Kn,"class","svelte-zj50zr"),x(Qn,"class","svelte-zj50zr"),_(ta,"white-space","normal"),x(ta,"class","svelte-zj50zr"),x(Xn,"class","svelte-zj50zr"),x(ia,"class","small svelte-zj50zr"),x(la,"class","small svelte-zj50zr"),x(oa,"class","small svelte-zj50zr"),x(M,"class","cfg-scroll svelte-zj50zr"),x(t,"class","cfg-wrap svelte-zj50zr"),b(t,"minimized",!e[4])},m(a,l){u(a,t,l),c(t,n),ga.m(n,null),c(n,r),c(n,s),c(n,w),c(n,k),c(k,E),za.m(E,null),c(t,T),c(t,M),c(M,S),c(M,R),c(M,V),c(V,F),c(V,C),c(V,j),c(V,D),c(V,B);for(let e=0;e<_a.length;e+=1)_a[e].m(V,null);c(M,L),c(M,P),c(P,O),c(P,I),c(P,U),ba&&ba.m(U,null),c(U,H),Ea&&Ea.m(U,null),c(U,K),c(P,Z),Ta&&Ta.m(P,null),c(M,J),c(M,Q),c(Q,ee),c(Q,te),c(Q,ne),c(ne,ae),ae.checked=ae.__value===e[8],c(ne,ie),c(Q,re),c(Q,le),c(le,se),se.checked=se.__value===e[8],c(le,oe),c(Q,ce),c(Q,ue),c(ue,fe),fe.checked=fe.__value===e[8],c(ue,de),c(Q,he),c(Q,me),c(me,pe),pe.checked=pe.__value===e[8],c(me,ge),c(Q,ve),c(Q,xe),c(Q,ze),c(ze,$e),$e.checked=$e.__value===e[8],c(ze,_e),c(Q,we),c(Q,be),c(be,ke),ke.checked=ke.__value===e[8],c(be,Ee),c(Q,Te),c(Q,Me),c(Q,Se),c(Se,ye),ye.checked=ye.__value===e[8],c(Se,Re),c(Q,Ve),c(Q,Fe),c(Fe,Ce),Ce.checked=Ce.__value===e[8],c(Fe,je),c(M,Ae),c(M,De),c(De,Be),c(De,Le),c(De,Pe),c(De,Oe),c(De,Ie),c(De,Ue),c(De,He),c(De,Ne),c(De,Xe),c(De,Ge),c(De,qe),c(De,Ye),c(De,We),c(De,Ke),c(De,Ze),c(De,Je),c(De,Qe),c(M,et),c(M,tt),c(tt,nt),c(tt,vt),c(tt,xt),c(tt,zt),Y($t,tt,null),c(tt,wt),Y(bt,tt,null),c(tt,Et),Y(Tt,tt,null),c(tt,St),Y(yt,tt,null),c(tt,Vt),Y(Ft,tt,null),c(M,jt),c(M,At),c(At,Dt),c(At,Bt),c(At,Lt),Ba&&Ba.m(Lt,null),c(Lt,Pt),c(Lt,Ot),c(Lt,It),c(Lt,Ut),c(Lt,Ht),c(Ht,Nt),Nt.checked=e[9],c(Ht,Xt),c(At,Gt),La&&La.m(At,null),c(M,qt),c(M,Yt),c(Yt,Wt),c(Yt,Kt),c(Yt,Zt),c(Yt,Jt),c(Yt,Qt),c(Yt,en),c(Yt,tn),c(Yt,nn),c(Yt,an),c(M,rn),c(M,ln),c(ln,sn),c(ln,on),c(ln,cn),c(cn,un),c(un,fn),c(fn,dn),dn.checked=dn.__value===e[12],c(fn,hn),c(un,mn),c(un,pn),c(un,gn),c(gn,vn),vn.checked=vn.__value===e[12],c(gn,xn),c(un,zn),c(un,$n),c(cn,_n),c(cn,wn),c(wn,bn),c(bn,kn),kn.checked=kn.__value===e[0],c(bn,En),c(wn,Tn),c(wn,Mn),c(wn,Sn),c(Sn,yn),yn.checked=yn.__value===e[0],c(Sn,Rn),c(wn,Vn),c(wn,Fn),c(wn,Cn),c(Cn,jn),jn.checked=jn.__value===e[0],c(Cn,An),c(wn,Dn),c(wn,Bn),c(ln,Ln),c(ln,Pn),c(Pn,On),c(Pn,In),$(In,e[2]),c(Pn,Un),c(Pn,Hn),c(M,Nn),c(M,Xn),c(Xn,Gn),c(Xn,qn),c(Xn,Yn),$(Yn,e[5].address),c(Xn,Wn),c(Xn,Kn),c(Kn,Zn),Zn.checked=e[5].started,c(Kn,Jn),c(Xn,Qn),c(Xn,ea),c(Xn,ta),c(ta,na),c(M,aa),c(M,ia),c(M,ra),c(M,la),c(M,sa),c(M,oa),e[69](t),ca=!0,ua||(fa=[v(window,"keydown",e[28]),v(s,"click",(function(){i(e[7])&&e[7].apply(this,arguments)})),v(k,"click",e[23]),v(j,"click",e[35]),v(ae,"change",e[42]),v(se,"change",e[44]),v(fe,"change",e[45]),v(pe,"change",e[46]),v($e,"change",e[47]),v(ke,"change",e[48]),v(ye,"change",e[49]),v(Ce,"change",e[50]),v(Pe,"click",e[51]),v(Ie,"click",e[52]),v(He,"click",e[53]),v(Xe,"click",e[54]),v(qe,"click",e[30]),v(We,"click",e[31]),v(Ze,"click",e[32]),v(Pt,"input",e[24]),v(Nt,"change",e[60]),v(Qt,"input",e[27]),v(dn,"change",e[61]),v(vn,"change",e[62]),v(kn,"change",e[63]),v(yn,"change",e[64]),v(jn,"change",e[65]),v(In,"change",e[66]),v(In,"input",e[66]),v(Yn,"input",e[67]),v(Zn,"change",e[68])],ua=!0)},p(a,i){if(pa===(pa=ma(e=a))&&ga?ga.p(e,i):(ga.d(1),ga=pa(e),ga&&(ga.c(),ga.m(n,r))),xa!==(xa=va(e))&&(za.d(1),za=xa(e),za&&(za.c(),za.m(E,null))),12&i[1]){let t;for($a=Object.entries(e[34]),t=0;t<$a.length;t+=1){const n=ot(e,$a,t);_a[t]?_a[t].p(n,i):(_a[t]=ht(n),_a[t].c(),_a[t].m(V,null))}for(;t<_a.length;t+=1)_a[t].d(1);_a.length=$a.length}ba&&ba.p&&64&i[1]&&o(ba,wa,e,e[37],i,lt,st),Ea&&Ea.p&&64&i[1]&&o(Ea,ka,e,e[37],i,it,rt),64&i[0]&&(da=!e[6].isHighpSupported()),da?Ta||(Ta=mt(),Ta.c(),Ta.m(P,null)):Ta&&(Ta.d(1),Ta=null),256&i[0]&&(ae.checked=ae.__value===e[8]),256&i[0]&&(se.checked=se.__value===e[8]),256&i[0]&&(fe.checked=fe.__value===e[8]),256&i[0]&&(pe.checked=pe.__value===e[8]),256&i[0]&&($e.checked=$e.__value===e[8]),256&i[0]&&(ke.checked=ke.__value===e[8]),256&i[0]&&(ye.checked=ye.__value===e[8]),256&i[0]&&(Ce.checked=Ce.__value===e[8]);const l={};64&i[0]&&(l.masks=e[6].getMasks()),!_t&&131072&i[0]&&(_t=!0,l.coef=e[17],A((()=>_t=!1))),$t.$set(l);const s={};64&i[0]&&(s.masks=e[6].getMasks()),!kt&&262144&i[0]&&(kt=!0,s.coef=e[18],A((()=>kt=!1))),bt.$set(s);const c={};64&i[0]&&(c.masks=e[6].getMasks()),!Mt&&1048576&i[0]&&(Mt=!0,c.coef=e[20],A((()=>Mt=!1))),Tt.$set(c);const u={};64&i[0]&&(u.masks=e[6].getMasks()),!Rt&&524288&i[0]&&(Rt=!0,u.coef=e[19],A((()=>Rt=!1))),yt.$set(u);const f={};64&i[0]&&(f.masks=e[6].getMasks()),!Ct&&2097152&i[0]&&(Ct=!0,f.coef=e[21],A((()=>Ct=!1))),Ft.$set(f),e[9]?Ba&&(Ba.d(1),Ba=null):Ba||(Ba=pt(),Ba.c(),Ba.m(Lt,Pt)),(!ca||16384&i[0])&&x(Pt,"max",e[14]),(!ca||32768&i[0])&&(Pt.value=e[15]),(!ca||1024&i[0])&&z(It,e[10]),512&i[0]&&(Nt.checked=e[9]),e[9]?La&&(La.d(1),La=null):La?La.p(e,i):(La=gt(e),La.c(),La.m(At,null)),(!ca||4194304&i[0])&&(Qt.value=e[22]),(!ca||2&i[0])&&z(tn,e[1]),4096&i[0]&&(dn.checked=dn.__value===e[12]),4096&i[0]&&(vn.checked=vn.__value===e[12]),1&i[0]&&(kn.checked=kn.__value===e[0]),1&i[0]&&(yn.checked=yn.__value===e[0]),1&i[0]&&(jn.checked=jn.__value===e[0]),4&i[0]&&$(In,e[2]),(!ca||4&i[0])&&z(Hn,e[2]),32&i[0]&&Yn.value!==e[5].address&&$(Yn,e[5].address),32&i[0]&&(Zn.checked=e[5].started),(!ca||32&i[0])&&ha!==(ha=e[5].hint+"")&&z(na,ha),16&i[0]&&b(t,"minimized",!e[4])},i(e){ca||(N(ba,e),N(Ea,e),N($t.$$.fragment,e),N(bt.$$.fragment,e),N(Tt.$$.fragment,e),N(yt.$$.fragment,e),N(Ft.$$.fragment,e),ca=!0)},o(e){X(ba,e),X(Ea,e),X($t.$$.fragment,e),X(bt.$$.fragment,e),X(Tt.$$.fragment,e),X(yt.$$.fragment,e),X(Ft.$$.fragment,e),ca=!1},d(n){n&&f(t),ga.d(),za.d(),d(_a,n),ba&&ba.d(n),Ea&&Ea.d(n),Ta&&Ta.d(),e[43][0].splice(e[43][0].indexOf(ae),1),e[43][0].splice(e[43][0].indexOf(se),1),e[43][0].splice(e[43][0].indexOf(fe),1),e[43][0].splice(e[43][0].indexOf(pe),1),e[43][0].splice(e[43][0].indexOf($e),1),e[43][0].splice(e[43][0].indexOf(ke),1),e[43][0].splice(e[43][0].indexOf(ye),1),e[43][0].splice(e[43][0].indexOf(Ce),1),W($t),W(bt),W(Tt),W(yt),W(Ft),Ba&&Ba.d(),La&&La.d(),e[43][1].splice(e[43][1].indexOf(dn),1),e[43][1].splice(e[43][1].indexOf(vn),1),e[43][2].splice(e[43][2].indexOf(kn),1),e[43][2].splice(e[43][2].indexOf(yn),1),e[43][2].splice(e[43][2].indexOf(jn),1),e[69](null),ua=!1,a(fa)}}}function xt(e,t,n){let a,i,r,l,s,o,c,u,f,d,h,m,p,{$$slots:g={},$$scope:v}=t,{engine:x}=t,{frameSize:z}=t,{frameMode:$="darken"}=t,{itersPerFrame:_=24}=t,{onResize:w}=t,{onScreenshot:b}=t,{wrapElem:k}=t,{isShown:E=!0}=t,{record:T}=t,M="green",S=!1;let R=()=>x;function V(e){const[t,n]=x.getSize();for(let a=0;a<e;a++){const i=t/2+24*(a-(e-1)/2);x.drawLine(i,0,i,n)}}function F(){const[e,t]=x.getSize();x.drawDot(e/2,t/2)}function C(){const[e,t]=x.getSize();for(let n=0;n<3;n++){const a=n/3*2*Math.PI-Math.PI/2;x.drawDot(e/2+e/8*Math.cos(a),t/2+t/8*Math.sin(a))}}function j(){const[e,t]=x.getSize(),n=Math.max(5,Math.round(e*t/50/50));for(let a=0;a<n;a++)x.drawDot(e*Math.random(),t*Math.random())}function A(e){const t=x.getMasks().find(e);if(!t)throw new Error("mask not found");return t}function D(e){const t=x.getCoefs();for(const e in t)t[e].mask=x.getMasks().find((e=>e instanceof ve));n(17,c.minVal=n(17,c.maxVal=1,c),c),n(18,u.minVal=n(18,u.maxVal=.5,u),u),n(20,d.minVal=n(20,d.maxVal=.055,d),d),n(19,f.minVal=n(19,f.maxVal=.062,f),f),n(21,h.minVal=n(21,h.maxVal=1,h),h),n(12,m="repeat"),n(8,M="green"),x.clear(),e(),x.updateIterationData()}const B={"рождение Вселенной"(){n(20,d.minVal=.018,d),n(20,d.maxVal=.055,d),n(20,d.mask=A((e=>e instanceof $e)),d),n(8,M="darkSide"),F()},"дерево в рамке"(){n(17,c.minVal=n(17,c.maxVal=.9344339479362163,c),c),n(18,u.minVal=.6366397881990161,u),n(18,u.maxVal=.4177794651597456,u),n(18,u.mask=A((e=>e instanceof xe&&315===e.getAngleDeg())),u),n(20,d.minVal=.0847265052049363,d),n(20,d.maxVal=.014681911230716192,d),n(20,d.mask=A((e=>e instanceof xe&&315===e.getAngleDeg())),d),n(19,f.minVal=n(19,f.maxVal=.061886156571588954,f),f),n(8,M="blueGreen"),V(1)},"реактор"(){n(20,d.minVal=.055,d),n(20,d.maxVal=.0272,d),n(20,d.mask=A((e=>e instanceof ze)),d),n(19,f.minVal=.062,f),n(19,f.maxVal=.05,f),n(19,f.mask=A((e=>e instanceof $e)),f),n(21,h.minVal=n(21,h.maxVal=x.isHighpSupported()?.5:1,h),h),n(8,M="electric"),j()},"спирали"(){n(17,c.minVal=n(17,c.maxVal=0,c),c),n(18,u.minVal=n(18,u.maxVal=.5,u),u),n(20,d.minVal=n(20,d.maxVal=.015,d),d),n(19,f.minVal=n(19,f.maxVal=.045,f),f),n(21,h.minVal=n(21,h.maxVal=.3,h),h);const[e,t]=x.getSize(),[a,i]=[e/2,t/2],r=.2,l=e=>30*e,s=(e,t)=>[a+Math.cos(e)*(l(e)+t),i+Math.sin(e)*(l(e)+t)];for(let n=0;l(n)<Math.min(e/2,t/2);n+=r)x.drawLine(...s(n,0),...s(n+r,0),[.25,.2]),x.drawLine(...s(n,3),...s(n+r,3),[.25,.2]),x.drawLine(...s(n,6),...s(n+r,6),[.25,.2]),x.drawLine(...s(n,9),...s(n+r,9),[.25,.2]),x.drawLine(...s(n,12),...s(n+r,12),[0,1])},"спирали (красно-зелёные)"(){B.спирали(),n(8,M="changes")},"пульсация"(){n(17,c.minVal=n(17,c.maxVal=.2,c),c),n(18,u.minVal=n(18,u.maxVal=.8,u),u),n(20,d.minVal=n(20,d.maxVal=.018,d),d),n(19,f.minVal=.064,f),n(19,f.maxVal=.032,f),n(19,f.mask=A((e=>e instanceof $e)),f),n(21,h.minVal=n(21,h.maxVal=x.isHighpSupported()?.5:1,h),h),n(8,M="green"),F()},"кипящая жижа"(){n(20,d.minVal=.028,d),n(20,d.maxVal=.005,d),n(20,d.mask=A((e=>e instanceof xe&&270===e.getAngleDeg())),d),n(19,f.minVal=n(19,f.maxVal=.05,f),f),n(21,h.minVal=n(21,h.maxVal=x.isHighpSupported()?.5:.8,h),h);const[e,t]=x.getSize();x.drawDot(e/2,.8*t)},"фаербол"(){n(20,d.minVal=.01,d),n(20,d.maxVal=.02,d),n(20,d.mask=A((e=>e instanceof $e)),d),n(19,f.minVal=.059,f),n(19,f.maxVal=.04,f),n(19,f.mask=A((e=>e instanceof $e)),f),n(8,M="hsv"),n(21,h.minVal=n(21,h.maxVal=x.isHighpSupported()?.5:.8,h),h),C()},"кляксы"(){n(20,d.minVal=n(20,d.maxVal=.09,d),d),n(19,f.minVal=n(19,f.maxVal=.0576,f),f),n(8,M="blueGreen"),j()},"отпечаток пальца"(){n(17,c.minVal=.44,c),n(17,c.maxVal=1,c),n(17,c.mask=A((e=>e instanceof $e)),c),n(18,u.minVal=.414,u),n(18,u.maxVal=.473,u),n(18,u.mask=A((e=>e instanceof xe&&270===e.getAngleDeg())),u),n(20,d.minVal=n(20,d.maxVal=.035,d),d),n(19,f.minVal=n(19,f.maxVal=.059,f),f),n(8,M="whiteBlack"),j()},"чашка Петри"(){n(20,d.minVal=n(20,d.maxVal=.014,d),d),n(19,f.minVal=n(19,f.maxVal=.05,f),f),n(21,h.minVal=-.05,h),n(21,h.maxVal=1,h),n(21,h.mask=A((e=>e instanceof $e)),h),n(8,M="green"),F()},"деление клеток"(){if(n(20,d.minVal=n(20,d.maxVal=.03,d),d),n(19,f.minVal=n(19,f.maxVal=.0625,f),f),n(8,M="blueGreen"),F(),!x.isHighpSupported()){const[e,t]=x.getSize();x.drawLine(e/2-3,t/2,e/2+3,t/2)}},"круги и черви"(){n(20,d.minVal=n(20,d.maxVal=.082,d),d),n(19,f.minVal=n(19,f.maxVal=.06,f),f),n(8,M="blueGreen"),j()},"карта kill/feed"(){n(20,d.minVal=.01,d),n(20,d.maxVal=.1,d),n(20,d.mask=A((e=>e instanceof xe&&0===e.getAngleDeg())),d),n(19,f.minVal=.045,f),n(19,f.maxVal=.07,f),n(19,f.mask=A((e=>e instanceof xe&&270===e.getAngleDeg())),f),n(12,m="mirror");for(let e=0;e<10;e++)j()},"карта диффузий"(){n(17,c.minVal=.3,c),n(17,c.maxVal=1,c),n(17,c.mask=A((e=>e instanceof xe&&0===e.getAngleDeg())),c),n(18,u.minVal=.1,u),n(18,u.maxVal=.6,u),n(18,u.mask=A((e=>e instanceof xe&&270===e.getAngleDeg())),u),n(12,m="mirror");for(let e=0;e<10;e++)j()}};return e.$$set=e=>{"engine"in e&&n(6,x=e.engine),"frameSize"in e&&n(2,z=e.frameSize),"frameMode"in e&&n(0,$=e.frameMode),"itersPerFrame"in e&&n(1,_=e.itersPerFrame),"onResize"in e&&n(36,w=e.onResize),"onScreenshot"in e&&n(7,b=e.onScreenshot),"wrapElem"in e&&n(3,k=e.wrapElem),"isShown"in e&&n(4,E=e.isShown),"record"in e&&n(5,T=e.record),"$$scope"in e&&n(37,v=e.$$scope)},e.$$.update=()=>{3648&e.$$.dirty[0]|32&e.$$.dirty[1]&&a&&l!==r&&(n(11,l=r),x.resize(r,l),w()),1024&e.$$.dirty[0]&&n(15,s=Math.floor(Math.log2(r))),2048&e.$$.dirty[0]&&n(16,o=Math.floor(Math.log2(l))),4096&e.$$.dirty[0]&&R().setWrapMode(m),1&e.$$.dirty[0]&&R().toggleFrame("darken"===$),256&e.$$.dirty[0]&&R().setColorMode(M),2&e.$$.dirty[0]&&n(22,p=function(e){if(e<=1)return e;const t=Math.floor(Math.log2(e));return 2*t+(e-Math.pow(2,t)<Math.pow(2,t-1)?0:1)}(_))},n(9,a=R().getSize()[0]===R().getSize()[1]),n(14,i=Math.floor(Math.log2(R().getMaxFieldSize()))),n(10,r=R().getSize()[0]),n(11,l=R().getSize()[1]),n(17,c=R().getCoefs().diffusionRateA),n(18,u=R().getCoefs().diffusionRateB),n(19,f=R().getCoefs().killRate),n(20,d=R().getCoefs().feedRate),n(21,h=R().getCoefs().timeDelta),n(12,m=R().getWrapMode()),[$,_,z,k,E,T,x,b,M,a,r,l,m,S,i,s,o,c,u,f,d,h,p,function(){n(13,S=!S),S?document.body.requestFullscreen():document.exitFullscreen()},e=>{n(10,r=Math.pow(2,+e.currentTarget.value)),a&&n(11,l=r),x.resize(r,l),w()},e=>{n(11,l=Math.pow(2,+e.currentTarget.value)),x.resize(r,l),w()},()=>x.updateIterationData(),e=>n(1,_=function(e){if(e<=1)return e;const t=Math.pow(2,Math.floor(e/2));return t+(e%2==0?0:t/2)}(+e.currentTarget.value)),function(e){"Escape"===e.key&&n(4,E=!E)},V,F,C,j,D,B,function(){D((()=>{const e={diffusionRateA:[.2,1],diffusionRateB:[.1,.8],feedRate:[.005,.12],killRate:[.035,.07],timeDelta:[.8,1]},t=x.getMasks(),n=t.find((e=>e instanceof ve));for(const[a,i]of Object.entries(x.getCoefs())){const r=Math.random()>.8?n:t[Math.random()*t.length|0];i.mask=r;const[l,s]=e[a];i.maxVal=l+Math.random()*(s-l),i.minVal=r===n?i.maxVal:l+Math.random()*(s-l)}Math.random()<.25?V(1+3.999*Math.random()|0):Math.random()<.333?F():Math.random()<.5?C():j()}))},w,v,g,()=>n(4,E=!1),()=>n(4,E=!0),e=>D(e),function(){M=this.__value,n(8,M)},[[],[],[]],function(){M=this.__value,n(8,M)},function(){M=this.__value,n(8,M)},function(){M=this.__value,n(8,M)},function(){M=this.__value,n(8,M)},function(){M=this.__value,n(8,M)},function(){M=this.__value,n(8,M)},function(){M=this.__value,n(8,M)},()=>x.clear(),()=>V(1),()=>V(2),()=>V(3),function(e){c=e,n(17,c),n(70,R)},function(e){u=e,n(18,u),n(70,R)},function(e){d=e,n(20,d),n(70,R)},function(e){f=e,n(19,f),n(70,R)},function(e){h=e,n(21,h),n(70,R)},function(){a=this.checked,n(9,a),n(70,R)},function(){m=this.__value,n(12,m),n(70,R)},function(){m=this.__value,n(12,m),n(70,R)},function(){$=this.__value,n(0,$)},function(){$=this.__value,n(0,$)},function(){$=this.__value,n(0,$)},function(){var e;e=this.value,z=""===e?null:+e,n(2,z)},function(){T.address=this.value,n(5,T)},function(){T.started=this.checked,n(5,T)},function(e){y[e?"unshift":"push"]((()=>{k=e,n(3,k)}))}]}class zt extends J{constructor(e){super(),Z(this,e,xt,vt,r,{engine:6,frameSize:2,frameMode:0,itersPerFrame:1,onResize:36,onScreenshot:7,wrapElem:3,isShown:4,record:5},[-1,-1,-1])}}function $t(t){let n,a=t[0].toFixed(0)+"";return{c(){n=p(a)},m(e,t){u(e,n,t)},p(e,[t]){1&t&&a!==(a=e[0].toFixed(0)+"")&&z(n,a)},i:e,o:e,d(e){e&&f(n)}}}function _t(e,t,n){let a=0,i=Date.now(),r=0,l=[],{average:s=1}=t;return e.$$set=e=>{"average"in e&&n(1,s=e.average)},[a,s,function(e){r+=e||1;const t=Date.now(),o=t-i;if(o>=1e3){if(s<=1)n(0,a=r);else{l.push(r),l.length>s&&l.shift();let e=0;for(let t=0;t<l.length;t++)e+=l[t];n(0,a=e/l.length)}i=o<2e3?i-1e3:t,i=t,r=0}}]}class wt extends J{constructor(e){super(),Z(this,e,_t,$t,r,{average:1,frame:2})}get frame(){return this.$$.ctx[2]}}function bt(e){let t,n,a,i,r,l,s,o;function c(t){e[18](t)}function u(t){e[19](t)}function f(t){e[20](t)}function d(t){e[21](t)}function h(t){e[22](t)}function m(t){e[23](t)}let p={engine:e[8],onResize:e[14],onScreenshot:e[13],$$slots:{ips:[Et],fps:[kt]},$$scope:{ctx:e}};return void 0!==e[1]&&(p.wrapElem=e[1]),void 0!==e[11]&&(p.isShown=e[11]),void 0!==e[3]&&(p.frameSize=e[3]),void 0!==e[0]&&(p.frameMode=e[0]),void 0!==e[9]&&(p.itersPerFrame=e[9]),void 0!==e[2]&&(p.record=e[2]),t=new zt({props:p}),y.push((()=>G(t,"wrapElem",c))),y.push((()=>G(t,"isShown",u))),y.push((()=>G(t,"frameSize",f))),y.push((()=>G(t,"frameMode",d))),y.push((()=>G(t,"itersPerFrame",h))),y.push((()=>G(t,"record",m))),{c(){q(t.$$.fragment)},m(e,n){Y(t,e,n),o=!0},p(e,o){const c={};256&o[0]&&(c.engine=e[8]),48&o[0]|4&o[1]&&(c.$$scope={dirty:o,ctx:e}),!n&&2&o[0]&&(n=!0,c.wrapElem=e[1],A((()=>n=!1))),!a&&2048&o[0]&&(a=!0,c.isShown=e[11],A((()=>a=!1))),!i&&8&o[0]&&(i=!0,c.frameSize=e[3],A((()=>i=!1))),!r&&1&o[0]&&(r=!0,c.frameMode=e[0],A((()=>r=!1))),!l&&512&o[0]&&(l=!0,c.itersPerFrame=e[9],A((()=>l=!1))),!s&&4&o[0]&&(s=!0,c.record=e[2],A((()=>s=!1))),t.$set(c)},i(e){o||(N(t.$$.fragment,e),o=!0)},o(e){X(t.$$.fragment,e),o=!1},d(e){W(t,e)}}}function kt(e){let t,n,a;return n=new wt({props:{}}),e[17](n),{c(){t=h("span"),q(n.$$.fragment),x(t,"slot","fps")},m(e,i){u(e,t,i),Y(n,t,null),a=!0},p(e,t){n.$set({})},i(e){a||(N(n.$$.fragment,e),a=!0)},o(e){X(n.$$.fragment,e),a=!1},d(a){a&&f(t),e[17](null),W(n)}}}function Et(e){let t,n,a;return n=new wt({props:{average:5}}),e[16](n),{c(){t=h("span"),q(n.$$.fragment),x(t,"slot","ips")},m(e,i){u(e,t,i),Y(n,t,null),a=!0},p(e,t){n.$set({})},i(e){a||(N(n.$$.fragment,e),a=!0)},o(e){X(n.$$.fragment,e),a=!1},d(a){a&&f(t),e[16](null),W(n)}}}function Tt(e){let t,n;return t=new Xe({props:{origin:e[10],$$slots:{default:[Mt]},$$scope:{ctx:e}}}),{c(){q(t.$$.fragment)},m(e,a){Y(t,e,a),n=!0},p(e,n){const a={};1024&n[0]&&(a.origin=e[10]),4&n[1]&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(N(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){W(t,e)}}}function Mt(e){let t,n,a;return{c(){t=p("Так сохранить картинку, возможно,"),n=h("br"),a=p(" не получится. Вверху есть кнопка.")},m(e,i){u(e,t,i),u(e,n,i),u(e,a,i)},d(e){e&&f(t),e&&f(n),e&&f(a)}}}function St(e){let t,n,i,r,l,s,o,d=e[8]&&bt(e),m=e[10]&&Tt(e);return{c(){d&&d.c(),t=g(),n=h("div"),i=h("canvas"),r=g(),m&&m.c(),x(i,"class","main-canvas svelte-mcfxvm"),x(i,"style",e[12]),b(i,"fullsize","hidden"!==e[0]),x(n,"class","draw-region svelte-mcfxvm")},m(a,f){d&&d.m(a,f),u(a,t,f),u(a,n,f),c(n,i),e[24](i),c(n,r),m&&m.m(n,null),e[27](n),l=!0,s||(o=[v(window,"resize",e[14]),v(i,"contextmenu",e[25]),v(i,"mousemove",e[26])],s=!0)},p(e,a){e[8]?d?(d.p(e,a),256&a[0]&&N(d,1)):(d=bt(e),d.c(),N(d,1),d.m(t.parentNode,t)):d&&(U(),X(d,1,1,(()=>{d=null})),H()),(!l||4096&a[0])&&x(i,"style",e[12]),1&a[0]&&b(i,"fullsize","hidden"!==e[0]),e[10]?m?(m.p(e,a),1024&a[0]&&N(m,1)):(m=Tt(e),m.c(),N(m,1),m.m(n,null)):m&&(U(),X(m,1,1,(()=>{m=null})),H())},i(e){l||(N(d),N(m),l=!0)},o(e){X(d),X(m),l=!1},d(i){d&&d.d(i),i&&f(t),i&&f(n),e[24](null),m&&m.d(),e[27](null),s=!1,a(o)}}}function yt(e,t,n){let a,i,r,l=null,s=null,o=null,c="darken",u=24,f=null,d=null,h={started:!1,address:"127.0.0.1:5001",hint:""};const m={x:0,y:0,width:1,height:1};let p=.2,g=!0,v=g;var x;function z(){if(null===o)return;const[e,t]=o.getSize(),a=i.getBoundingClientRect(),l=Math.round(a.width*devicePixelRatio),s=Math.round(a.height*devicePixelRatio),u=a.width/a.height;let d,g;if(u>e/t){const e=t*(1+2*p);e<=s&&"hidden"!==c?(d=u*e,g=e):(d=l,g=s)}else{const t=e*(1+2*p);t<=l&&"hidden"!==c?(d=t,g=t/u):(d=l,g=s)}const v=(f&&!h.started?f.getBoundingClientRect().width:0)/a.width*d,x=Math.min(d/e,g/t)/(1+2*p);n(15,m.x=Math.floor((d-e*x+v)/2),m),n(15,m.x=Math.min(m.x,Math.floor(d-e*x)),m),n(15,m.y=Math.floor((g-t*x)/2),m),n(15,m.width=e*x,m),n(15,m.height=t*x,m),"hidden"===c?(n(7,r.width=e,r),n(7,r.height=t,r)):(n(7,r.width=d,r),n(7,r.height=g,r)),n(2,h.hint=r?`ffmpeg -vcodec rawvideo -f rawvideo -pixel_format rgba -r 60 -video_size ${r.width}x${r.height} -i - ...`:"",h)}function $(e,t){if(!o)return[e,t];if("hidden"===c){const n=devicePixelRatio/(m.width/r.width);return[e*n,t*n]}{const[n]=o.getSize(),a=i.getBoundingClientRect(),l=r.width/a.width,s=n/m.width;return[(e*l-m.x)*s,(t*l-m.y)*s]}}x=()=>{v!==g&&z(),v=g},T().$$.after_update.push(x),M((()=>{const e=r.getContext("webgl",{antialias:!0,depth:!1,alpha:!1,stencil:!1});if(null===e)return alert("webgl not available");const t=e;try{n(8,o=new Re(t,512,512))}catch(e){return void alert(e+"")}const a=o;for(let e=0;e<200;e++)a.drawDot(512*Math.random(),512*Math.random());n(0,c=a.isFrameVisible()?"darken":"visible"),z();let i=Promise.resolve(),f=new Uint8Array(0);!function e(){const n=_;if(null!==n&&n.upd<Date.now()-250&&a.drawDot(...$(n.x,n.y)),a.iter(u),s&&s.frame(u),a.draw("hidden"===c?null:m),l&&l.frame(),h&&h.started){const n=h.address,{width:a,height:r}=t.canvas;f.length!==a*r*4&&(f=new Uint8Array(a*r*4)),t.readPixels(0,0,a,r,t.RGBA,t.UNSIGNED_BYTE,f),i=i.then((()=>fetch("http://"+n,{method:"POST",body:f}))).catch(console.error).then((()=>{requestAnimationFrame(e)}))}else requestAnimationFrame(e)}()}));let _=null;M((()=>{const e=Ve({startElem:i,offsetElem:r,callbacks:{singleDown:(e,t,n,a)=>(_={x:n,y:a,upd:Date.now()},o&&o.drawDot(...$(n,a)),!0),singleMove(e,t,n,a){const i=_;return o&&o.drawLine(...$(i.x,i.y),...$(n,a)),i.x=n,i.y=a,i.upd=Date.now(),!0},singleUp:(e,t)=>(_=null,!0)}});return()=>e.off()}));return e.$$.update=()=>{15&e.$$.dirty[0]&&p==p&&c&&f&&h.started==h.started&&z(),32769&e.$$.dirty[0]&&n(12,a="hidden"===c?`left: ${m.x/devicePixelRatio}px; top: ${m.y/devicePixelRatio}px; width: ${m.width/devicePixelRatio}px; height: ${m.height/devicePixelRatio}px;`:"")},[c,f,h,p,l,s,i,r,o,u,d,g,a,function(){if(!o)return;const[e,t]=o.getSize();n(7,r.width=e,r),n(7,r.height=t,r),o.draw(null),r.toBlob((e=>{const t=document.createElement("a");t.download="reaction-diffusion.png",document.body.appendChild(t);const n=URL.createObjectURL(e);t.href=n,t.click(),document.body.removeChild(t),URL.revokeObjectURL(n)}),"image/png"),z()},function(){z()},m,function(e){y[e?"unshift":"push"]((()=>{s=e,n(5,s)}))},function(e){y[e?"unshift":"push"]((()=>{l=e,n(4,l)}))},function(e){f=e,n(1,f)},function(e){g=e,n(11,g)},function(e){p=e,n(3,p)},function(e){c=e,n(0,c)},function(e){u=e,n(9,u)},function(e){h=e,n(2,h)},function(e){y[e?"unshift":"push"]((()=>{r=e,n(7,r)}))},e=>n(10,d={left:e.clientX,top:e.clientY}),()=>n(10,d=null),function(e){y[e?"unshift":"push"]((()=>{i=e,n(6,i)}))}]}return new class extends J{constructor(e){super(),Z(this,e,yt,St,r,{},[-1,-1])}}({target:document.body,props:{}})}();
//# sourceMappingURL=index.7800ccc8.js.map
